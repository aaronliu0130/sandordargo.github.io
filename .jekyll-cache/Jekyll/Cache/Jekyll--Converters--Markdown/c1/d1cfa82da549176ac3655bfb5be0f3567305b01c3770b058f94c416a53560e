I"ýq<p>For one of the latest dojos in our department, we chose a relatively simple one to help new people get on board. We were working on the <a href="http://codingdojo.org/kata/LeapYears/">leap year kata</a> in Randori style meaning that we were using only one computer - there were 9 of us.</p>

<p>We also applied some extra constraints, such as if after every three minutes our tests were not green (except for the red phase when we had to write a failing test), we had to wipe out our changes (<code class="language-plaintext highlighter-rouge">git reset --hard</code>).
<!--more--></p>

<p>Even with - some non-mentioned - extra constraints this kata doesnâ€™t take up one and half hours to implement, so we had some time to try something new. As you could have already guessed based on the title, we were experimenting with <a href="https://github.com/sandordargo/parameterizedTestExamplesCpp">parameterized tests in GTest</a>.</p>

<h2 id="how-to-make-our-tests-less-repetitive">How to make our tests less repetitive?</h2>

<p>The first question I might have to answer is what parameterized tests are?!</p>

<p>Imagine that you have a couple of quite similar tests, like these:</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
</pre></td><td class="rouge-code"><pre><span class="cp">#include &lt;gtest/gtest.h&gt;
</span>
<span class="cp">#include &lt;LeapYearCalendar.h&gt;
</span>
<span class="n">TEST</span><span class="p">(</span><span class="n">LeapYearTests</span><span class="p">,</span> <span class="mi">1</span><span class="n">IsOdd_IsNotLeapYear</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">LeapYearCalendar</span> <span class="n">leapYearCalendar</span><span class="p">;</span>
  <span class="n">ASSERT_FALSE</span><span class="p">(</span><span class="n">leapYearCalendar</span><span class="p">.</span><span class="n">isLeap</span><span class="p">(</span><span class="mi">1</span><span class="p">));</span>
<span class="p">}</span>

<span class="n">TEST</span><span class="p">(</span><span class="n">LeapYearTests</span><span class="p">,</span> <span class="mi">711</span><span class="n">IsOdd_IsNotLeapYear</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">LeapYearCalendar</span> <span class="n">leapYearCalendar</span><span class="p">;</span>
  <span class="n">ASSERT_FALSE</span><span class="p">(</span><span class="n">leapYearCalendar</span><span class="p">.</span><span class="n">isLeap</span><span class="p">(</span><span class="mi">711</span><span class="p">));</span>
<span class="p">}</span>

<span class="n">TEST</span><span class="p">(</span><span class="n">LeapYearTests</span><span class="p">,</span> <span class="mi">1989</span><span class="n">IsOdd_IsNotLeapYear</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">LeapYearCalendar</span> <span class="n">leapYearCalendar</span><span class="p">;</span>
  <span class="n">ASSERT_FALSE</span><span class="p">(</span><span class="n">leapYearCalendar</span><span class="p">.</span><span class="n">isLeap</span><span class="p">(</span><span class="mi">1989</span><span class="p">));</span>
<span class="p">}</span>

<span class="n">TEST</span><span class="p">(</span><span class="n">LeapYearTests</span><span class="p">,</span> <span class="mi">2013</span><span class="n">IsOdd_IsNotLeapYear</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">LeapYearCalendar</span> <span class="n">leapYearCalendar</span><span class="p">;</span>
  <span class="n">ASSERT_FALSE</span><span class="p">(</span><span class="n">leapYearCalendar</span><span class="p">.</span><span class="n">isLeap</span><span class="p">(</span><span class="mi">2013</span><span class="p">));</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>As you can observe the only things that change are the inputs and the expected results. Wouldnâ€™t it be great to <a href="https://amzn.to/2EhV5s8">refactor a bit</a> and reduce the code repetition?</p>

<p>No doubt, it would be just awesome!</p>

<p>But how to do it?</p>

<p>You might start off in different directions.</p>

<h3 id="using-a-fixture">Using a fixture</h3>

<p>One possible way to make the code DRYer is to create a fixture and get rid off the initialization of <code class="language-plaintext highlighter-rouge">Foo</code>.</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
</pre></td><td class="rouge-code"><pre>
<span class="cp">#include &lt;gtest/gtest.h&gt;
</span>
<span class="cp">#include &lt;LeapYearCalendar.h&gt;
</span>
<span class="k">class</span> <span class="nc">LeapYearFixtureTests</span> <span class="o">:</span> <span class="k">public</span> <span class="o">::</span><span class="n">testing</span><span class="o">::</span><span class="n">Test</span> <span class="p">{</span>
<span class="nl">protected:</span>
    <span class="n">LeapYearCalendar</span> <span class="n">leapYearCalendar</span><span class="p">;</span>
<span class="p">};</span>

<span class="n">TEST_F</span><span class="p">(</span><span class="n">LeapYearFixtureTests</span><span class="p">,</span> <span class="mi">1</span><span class="n">IsOdd_IsNotLeapYear</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">ASSERT_FALSE</span><span class="p">(</span><span class="n">leapYearCalendar</span><span class="p">.</span><span class="n">isLeap</span><span class="p">(</span><span class="mi">1</span><span class="p">));</span>
<span class="p">}</span>

<span class="n">TEST_F</span><span class="p">(</span><span class="n">LeapYearFixtureTests</span><span class="p">,</span> <span class="mi">711</span><span class="n">IsOdd_IsNotLeapYear</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">ASSERT_FALSE</span><span class="p">(</span><span class="n">leapYearCalendar</span><span class="p">.</span><span class="n">isLeap</span><span class="p">(</span><span class="mi">711</span><span class="p">));</span>
<span class="p">}</span>

<span class="n">TEST_F</span><span class="p">(</span><span class="n">LeapYearFixtureTests</span><span class="p">,</span> <span class="mi">1989</span><span class="n">IsOdd_IsNotLeapYear</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">ASSERT_FALSE</span><span class="p">(</span><span class="n">leapYearCalendar</span><span class="p">.</span><span class="n">isLeap</span><span class="p">(</span><span class="mi">1989</span><span class="p">));</span>
<span class="p">}</span>

<span class="n">TEST_F</span><span class="p">(</span><span class="n">LeapYearFixtureTests</span><span class="p">,</span> <span class="mi">2013</span><span class="n">IsOdd_IsNotLeapYear</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">ASSERT_FALSE</span><span class="p">(</span><span class="n">leapYearCalendar</span><span class="p">.</span><span class="n">isLeap</span><span class="p">(</span><span class="mi">2013</span><span class="p">));</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>This is nice, we might decide to stay here, but still, the code seems quite repetitive.</p>

<h3 id="the-good-old-for-loop">The good old <code class="language-plaintext highlighter-rouge">for</code> loop</h3>

<p>Another option is to create a list of years within the test case and iterate over it.</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="rouge-code"><pre><span class="cp">#include &lt;gtest/gtest.h&gt;
</span>
<span class="cp">#include &lt;LeapYearCalendar.h&gt;
</span>
<span class="n">TEST</span><span class="p">(</span><span class="n">LeapYearIterationTest</span><span class="p">,</span> <span class="n">OddYearsAreNotLeapYears</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">LeapYearCalendar</span> <span class="n">leapYearCalendar</span><span class="p">;</span>
    <span class="k">auto</span> <span class="n">oddYears</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">711</span><span class="p">,</span> <span class="mi">2013</span><span class="p">};</span>
    <span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="n">oddYear</span> <span class="o">:</span>  <span class="n">oddYears</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">ASSERT_FALSE</span><span class="p">(</span><span class="n">leapYearCalendar</span><span class="p">.</span><span class="n">isLeap</span><span class="p">(</span><span class="n">oddYear</span><span class="p">));</span>
    <span class="p">}</span>
<span class="p">}</span>

</pre></td></tr></tbody></table></code></pre></div></div>
<p>In terms of repetitiveness, in my opinion, this code is better, itâ€™s denser, yet it is very readable. But it has a big flaw! A good unittest should have only one logical assertion - some exceptions as always apply. On the other hand, in this case, we have multiple different assertions that should not be combined into one.</p>

<p>We might say this is a theoretical problem, but it has a practical issue too. Letâ€™s say that for our 2nd iteration the test fails. What happens then? Our tests are stopped and all the other values will not be tested. We miss the feedback for the other 4 values.</p>

<p>Maybe our code would fail with all the other values, but we will have to discover these failures one by one. What a pity!</p>

<h2 id="parameterized-tests-what-are-they">Parameterized tests, what are they?</h2>

<p>Can we combine the advantages of a DRY for loop with the ones of independent tests while removing the problems they have?</p>

<p>Of course, we can! Letâ€™s use parameterized testing from GTest.</p>

<p>We have two different ways to use this feature. One way is to build our tests from scratch and the other is to build them on the foundations of a <a href="https://github.com/google/googletest/blob/master/googletest/samples/sample5_unittest.cc"><code class="language-plaintext highlighter-rouge">FIXTURE</code></a> like the one we already saw when we introduced a common leapYear variable. Letâ€™s see the two options one by one.</p>

<h3 id="write-parameterized-tests-from-scratch">Write parameterized tests from scratch</h3>

<p>In this case, we have no existing fixture and we want our parameterized tests to exist on their own, without combining them with one.</p>

<p>In the coming example, Iâ€™m going to assume that we are building tests for the <a href="http://codingdojo.org/kata/LeapYears/">leap year code kata</a>.</p>

<p>First, we need to create our parameterized test class. Letâ€™s call it <code class="language-plaintext highlighter-rouge">LeapYearParametrizedTests</code> and it will inherit from  <code class="language-plaintext highlighter-rouge">::testing::TestWithParam&lt;T&gt;</code>. <code class="language-plaintext highlighter-rouge">T</code> is a template parameter and it is going to be the type of the parameter or parameters we want to pass in. Letâ€™s start with a simple example, where the parameters will be of the type integer.</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">LeapYearParameterizedTestFixture</span> <span class="o">:</span><span class="k">public</span> <span class="o">::</span><span class="n">testing</span><span class="o">::</span><span class="n">TestWithParam</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="p">{</span>
<span class="nl">protected:</span>
    <span class="n">LeapYearCalendar</span> <span class="n">leapYearCalendar</span><span class="p">;</span>
<span class="p">};</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Next, we need a test case with an assertion in it.</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre></td><td class="rouge-code"><pre><span class="n">TEST_P</span><span class="p">(</span><span class="n">LeapYearParameterizedTestFixture</span><span class="p">,</span> <span class="n">OddYearsAreNotLeapYears</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">year</span> <span class="o">=</span> <span class="n">GetParam</span><span class="p">();</span>
    <span class="n">ASSERT_FALSE</span><span class="p">(</span><span class="n">leapYearCalendar</span><span class="p">.</span><span class="n">isLeap</span><span class="p">(</span><span class="n">year</span><span class="p">));</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>While for a normal unittest we use the <code class="language-plaintext highlighter-rouge">TEST()</code> macro and <code class="language-plaintext highlighter-rouge">TEST_F()</code> for a fixture, we have to use <code class="language-plaintext highlighter-rouge">TEST_P()</code> for parameterized tests.
As the first parameter, we have to pass the name the test class and as the second we just have to pick a good name for what our tests represent.</p>

<p>So far, so good! Now we donâ€™t need anything else, but to call our use-case with - preferably - multiple inputs.</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre></td><td class="rouge-code"><pre><span class="n">INSTANTIATE_TEST_CASE_P</span><span class="p">(</span>
        <span class="n">LeapYearTests</span><span class="p">,</span>
        <span class="n">LeapYearParameterizedTestFixture</span><span class="p">,</span>
        <span class="o">::</span><span class="n">testing</span><span class="o">::</span><span class="n">Values</span><span class="p">(</span>
                <span class="mi">1</span><span class="p">,</span> <span class="mi">711</span><span class="p">,</span> <span class="mi">1989</span><span class="p">,</span> <span class="mi">2013</span>
        <span class="p">));</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Here we call the <code class="language-plaintext highlighter-rouge">INSTANTIATE_TEST_CASE_P</code> macro with first with a random name, then the test class and last but not least with our list of inputs.</p>

<p>Et voila, itâ€™s as easy as that! Here is the full example. I included a leap year implementation so you can run it easily if you have GTest available. You can also refer to my repo for the code and instructions for compiling and running it.</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
</pre></td><td class="rouge-code"><pre><span class="cp">#include &lt;gtest/gtest.h&gt;
</span>
<span class="cp">#include &lt;LeapYearCalendar.h&gt;
</span>
<span class="k">class</span> <span class="nc">LeapYearParameterizedTestFixture</span> <span class="o">:</span><span class="k">public</span> <span class="o">::</span><span class="n">testing</span><span class="o">::</span><span class="n">TestWithParam</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="p">{</span>
<span class="nl">protected:</span>
    <span class="n">LeapYearCalendar</span> <span class="n">leapYearCalendar</span><span class="p">;</span>
<span class="p">};</span>

<span class="n">TEST_P</span><span class="p">(</span><span class="n">LeapYearParameterizedTestFixture</span><span class="p">,</span> <span class="n">OddYearsAreNotLeapYears</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">year</span> <span class="o">=</span> <span class="n">GetParam</span><span class="p">();</span>
    <span class="n">ASSERT_FALSE</span><span class="p">(</span><span class="n">leapYearCalendar</span><span class="p">.</span><span class="n">isLeap</span><span class="p">(</span><span class="n">year</span><span class="p">));</span>
<span class="p">}</span>

<span class="n">INSTANTIATE_TEST_CASE_P</span><span class="p">(</span>
        <span class="n">LeapYearTests</span><span class="p">,</span>
        <span class="n">LeapYearParameterizedTestFixture</span><span class="p">,</span>
        <span class="o">::</span><span class="n">testing</span><span class="o">::</span><span class="n">Values</span><span class="p">(</span>
                <span class="mi">1</span><span class="p">,</span> <span class="mi">711</span><span class="p">,</span> <span class="mi">1989</span><span class="p">,</span> <span class="mi">2013</span>
        <span class="p">));</span>

</pre></td></tr></tbody></table></code></pre></div></div>

<p>If you want multiple test scenarios, you have to create a class for each scenario.</p>

<p><em>Also note that about GTest v1.8.1 you should use <code class="language-plaintext highlighter-rouge">INSTANTIATE_TEST_SUITE_P</code> instead of <code class="language-plaintext highlighter-rouge">INSTANTIATE_TEST_CASE_P</code>.</em></p>

<h3 id="write-parameterized-tests-based-on-an-existing-fixture">Write parameterized tests based on an existing fixture</h3>

<p>It might happen that you have already a test fixture available, like this one:</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">LeapYearTestFixtureToBeParameterized</span> <span class="o">:</span> <span class="k">public</span> <span class="o">::</span><span class="n">testing</span><span class="o">::</span><span class="n">Test</span>
<span class="p">{</span>
<span class="nl">protected:</span>
  <span class="n">LeapYearCalendar</span> <span class="n">leapYearCalendar</span><span class="p">;</span>
<span class="p">};</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>In this case, it is very simple, the fixture itself just helps to avoid declaring a leap year object in each different test case. Thus we can keep them really compact:</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="rouge-code"><pre><span class="n">TEST_F</span><span class="p">(</span><span class="n">LeapYearTestFixtureToBeParameterized</span><span class="p">,</span> <span class="mi">1996</span><span class="n">_IsDivisibleBy4_ShouldBeALeapYear</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">ASSERT_TRUE</span><span class="p">(</span><span class="n">leapYearCalendar</span><span class="p">.</span><span class="n">isLeap</span><span class="p">(</span><span class="mi">1996</span><span class="p">));</span>
<span class="p">}</span>

<span class="n">TEST_F</span><span class="p">(</span><span class="n">LeapYearTestFixtureToBeParameterized</span><span class="p">,</span> <span class="mi">1700</span><span class="n">_IsDivisibleBy100AndNotBy400_ShouldNotBeALeapYear</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">ASSERT_FALSE</span><span class="p">(</span><span class="n">leapYearCalendar</span><span class="p">.</span><span class="n">isLeap</span><span class="p">(</span><span class="mi">1700</span><span class="p">));</span>
<span class="p">}</span>

<span class="n">TEST_F</span><span class="p">(</span><span class="n">LeapYearTestFixtureToBeParameterized</span><span class="p">,</span> <span class="mi">1600</span><span class="n">_IsDivisibleBy400_ShouldBeALeapYear</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">ASSERT_TRUE</span><span class="p">(</span><span class="n">leapYearCalendar</span><span class="p">.</span><span class="n">isLeap</span><span class="p">(</span><span class="mi">1600</span><span class="p">));</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>So first we decided to have a fixture and we could name our test cases well enough to document why something is a leap year and some others are not leap years.</p>

<p>Then we thought that there are some use-cases which weâ€™d like to test with many different values. Hmâ€¦ What should we do?</p>

<p>We could create our parameterized tests here or in another file, it doesnâ€™t matter. But we wouldnâ€™t be able to access <code class="language-plaintext highlighter-rouge">leapYearCalendar</code>.</p>

<p>Put aside ugly global variables, what else can we do?</p>

<p>We can inherit from <code class="language-plaintext highlighter-rouge">::testing::WithParamInterface&lt;T&gt;</code> instead of <code class="language-plaintext highlighter-rouge">::testing::TestWithParam&lt;T&gt;</code>!</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">LeapYearTestFixtureToBeParameterized</span> <span class="o">:</span> <span class="k">public</span> <span class="o">::</span><span class="n">testing</span><span class="o">::</span><span class="n">Test</span>
<span class="p">{</span>
<span class="nl">protected:</span>
  <span class="n">LeapYearCalendar</span> <span class="n">leapYearCalendar</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">LeapYearParametrizedTestFixtureBasedOnFixture</span> <span class="o">:</span>
  <span class="k">public</span> <span class="n">LeapYearTestFixtureToBeParameterized</span><span class="p">,</span>
  <span class="k">public</span> <span class="o">::</span><span class="n">testing</span><span class="o">::</span><span class="n">WithParamInterface</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="p">{</span>
<span class="p">};</span>

</pre></td></tr></tbody></table></code></pre></div></div>

<p>After this, we basically do the same as in the previous example. We have our parameterized tests and the fixture to sharing some code, so yay, we removed some code duplication, we keep distinct names for the fixture test cases and one for the parameterized tests.</p>

<h3 id="how-to-pass-multiple-parameters-to-the-same-test-case">How to pass multiple parameters to the same test case?</h3>

<p>Letâ€™s say you have to inputs that you want to parameterize, or you want to pass both the input or the output! What can you do?</p>

<p>Well, you cannot pass more than one template arguments to the demonstrated classes, but you can always pass a <code class="language-plaintext highlighter-rouge">std::pair</code>, or even better a <code class="language-plaintext highlighter-rouge">std::tuple</code> with as many members as you want.</p>

<p>Here is a full example:</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
</pre></td><td class="rouge-code"><pre><span class="cp">#include &lt;tuple&gt;
</span>
<span class="cp">#include &lt;gtest/gtest.h&gt;
</span>
<span class="cp">#include &lt;LeapYearCalendar.h&gt;
</span>

<span class="k">class</span> <span class="nc">LeapYearMultipleParametersTests</span> <span class="o">:</span><span class="k">public</span> <span class="o">::</span><span class="n">testing</span><span class="o">::</span><span class="n">TestWithParam</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">tuple</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span> <span class="kt">bool</span><span class="o">&gt;&gt;</span> <span class="p">{</span>
<span class="nl">protected:</span>
    <span class="n">LeapYearCalendar</span> <span class="n">leapYearCalendar</span><span class="p">;</span>
<span class="p">};</span>

<span class="n">TEST_P</span><span class="p">(</span><span class="n">LeapYearMultipleParametersTests</span><span class="p">,</span> <span class="n">ChecksIfLeapYear</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">bool</span> <span class="n">expected</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">get</span><span class="o">&lt;</span><span class="mi">1</span><span class="o">&gt;</span><span class="p">(</span><span class="n">GetParam</span><span class="p">());</span>
    <span class="kt">int</span> <span class="n">year</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">get</span><span class="o">&lt;</span><span class="mi">0</span><span class="o">&gt;</span><span class="p">(</span><span class="n">GetParam</span><span class="p">());</span>
    <span class="n">ASSERT_EQ</span><span class="p">(</span><span class="n">expected</span><span class="p">,</span> <span class="n">leapYearCalendar</span><span class="p">.</span><span class="n">isLeap</span><span class="p">(</span><span class="n">year</span><span class="p">));</span>
<span class="p">}</span>

<span class="n">INSTANTIATE_TEST_CASE_P</span><span class="p">(</span>
        <span class="n">LeapYearTests</span><span class="p">,</span>
        <span class="n">LeapYearMultipleParametersTests</span><span class="p">,</span>
        <span class="o">::</span><span class="n">testing</span><span class="o">::</span><span class="n">Values</span><span class="p">(</span>
                <span class="n">std</span><span class="o">::</span><span class="n">make_tuple</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span> <span class="nb">false</span><span class="p">),</span>
                <span class="n">std</span><span class="o">::</span><span class="n">make_tuple</span><span class="p">(</span><span class="mi">2001</span><span class="p">,</span> <span class="nb">false</span><span class="p">),</span>
                <span class="n">std</span><span class="o">::</span><span class="n">make_tuple</span><span class="p">(</span><span class="mi">1996</span><span class="p">,</span> <span class="nb">true</span><span class="p">),</span>
                <span class="n">std</span><span class="o">::</span><span class="n">make_tuple</span><span class="p">(</span><span class="mi">1700</span><span class="p">,</span> <span class="nb">false</span><span class="p">),</span>
                <span class="n">std</span><span class="o">::</span><span class="n">make_tuple</span><span class="p">(</span><span class="mi">1600</span><span class="p">,</span> <span class="nb">true</span><span class="p">)));</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>Itâ€™s worth to note two things.</p>
<ul>
  <li>As values you pass tuples, as I already suggested.</li>
  <li>You have to wrap <code class="language-plaintext highlighter-rouge">GetParam()</code> with <code class="language-plaintext highlighter-rouge">std::get&lt;POSITION&gt;()</code> in order to get the desired parameter in a TestCase. As usual, in programming, we start counting from zero.</li>
</ul>

<h2 id="takeaway">Takeaway</h2>

<p>In this article, you could learn about how to write parameterized tests with the GTest library. GTest is not the only library you can use to implement such tests in a simple way, <a href="https://www.boost.org/doc/libs/1_64_0/libs/test/doc/html/boost_test/tests_organization/test_cases/param_test.html">boost::unit_test</a> and <a href="https://github.com/catchorg/Catch2/tree/master/docs">Catch2</a> also have this nice feature. In later articles, I might show them.</p>

<p>You can download and experiment with the above examples from this <a href="https://github.com/sandordargo/parameterizedTestExamplesCpp">this GitHub repository</a>.</p>
:ET