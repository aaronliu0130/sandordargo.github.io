I"»<p><a href="https://leanpub.com/legacycode">The Legacy Code Programmer‚Äôs Toolbox</a> is the quite fresh e-book of <a href="https://twitter.com/joboccara">Jonathan Boccara</a>, the person behind <a href="https://www.fluentcpp.com/">Fluent C++</a>.</p>

<p>Not surprisingly it‚Äôs about how to attack legacy code. The author gives practical examples of how we should digest such code and make it better for good. He doesn‚Äôt just propose to make any legacy code better, but to decide which parts are worth to change.
<!--more--></p>

<p>I‚Äôve been reading just before the <a href="">Code as a crime scene</a>, and at certain points, I was not sure which book I was reading. I think that‚Äôs a good sign for Jonathan.</p>

<p>When we speak about legacy code, it‚Äôs always important to define what we mean by legacy code. <a href="https://michaelfeathers.silvrback.com/">Micheal Feathers</a> defines such code as any code without tests. Boccara in this book took a bit different approach. In his, legacy code is defined by 3 qualities:</p>

<ul>
  <li>hard for you to understand</li>
  <li>you are not comfortable changing it</li>
  <li>and you are somehow concerned with</li>
</ul>

<p>Personally, probably I would still go with Feather‚Äôs approach. I think I understand why the author focuses on that you have to be concerned with the code. We tend to go to the extremes, either we prefer to refactor nothing or to refactor all the legacy code we encounter. We simply cannot afford to refactor just any code without tests, so he pulls in to the definition that the developer in charge must be concerned by that piece of code.</p>

<p>Still, to me, legacy code remains legacy code even if we are not concerned with it. If a building is collapsed, but you have nothing to do with it, it‚Äôs still a collapsed building. Do you have to rebuild it? Maybe not. Maybe nobody has to. Or not that moment, but the fact remains a fact.</p>

<p>Otherwise, I liked the book a lot. I‚Äôd like to highlight 3 pieces of advice he gave.</p>

<blockquote>
  <p>‚ÄúAvoid complaining if you don‚Äôt intend to improve the code.‚Äù</p>
</blockquote>

<p>Probably this is the most useful piece of advice he gives and it would be even better if we changed the word <em>code</em> by the word <em>situation</em>.</p>

<blockquote>
  <p>‚ÄúOne way to write better code is by reading code.‚Äù</p>
</blockquote>

<p>This is something I used to do. I used to keep <a href="http://sandordargo.com/blog/2018/02/28/setting-yourself-up-to-succeed">a pomodoro or two every week</a> to read code, but I stopped due to some changing priorities on my side. Probably I should reconsider this. You might ask how to find good code, how do you know that something is good. Jonathan gives some ideas in his book. But you might look around your standard library whatever language you use.</p>

<blockquote>
  <p>‚ÄúAs C++ expert <a href="https://github.com/tvaneerd">Tony van Eerd</a> says, the minimum number of occurrences to justify putting a piece of code in its own function is 1</p>
</blockquote>

<p>I love this one so much. I‚Äôm a huge fan of readable code involving highly descriptive variable and function names. I tend to extract functions even if I‚Äôd use them only once. This thought, this quote was exactly what I needed in a recent code review.</p>

<p>There is much more in <a href="https://leanpub.com/legacycode">the book</a>, but I cannot and don‚Äôt want to uncover everything. I‚Äôd highly encourage to read the book, or if you‚Äôll attend <a href="https://sched.co/Sfnq">CppCon</a>, you can also go and check out author‚Äôs presentation <a href="https://sched.co/Sfnq">10 Techniques to Understand Existing Code</a> which will cover many of the ideas presented in the book.</p>

<p>Happy reading!</p>
:ET