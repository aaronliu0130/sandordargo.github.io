I"G6<p>After <a href="https://www.dailycppinterview.com/">Daily C++ Interview</a> that I introduced in early September, let me share with you another project I have been working on for in my learning time for the last couple of months. <a href="https://github.com/sandordargo/cmake-project-creator">Cmake Project Creator</a> is fully open source, and if you are looking forward to <a href="https://hacktoberfest.digitalocean.com/">Hacktoberfest</a>, this might be interesting for you in case you speak Python and interested in C++.
<!--more--></p>

<h2 id="what-is-cmake-project-creator-about">What is Cmake Project Creator about?</h2>

<p>As a C++ developer, have you had the problem with starting new projects because you don’t know enough about how to compile multiple files or directories together? Or you simply didn’t have the time in the scope of a small coding dojo to spend 10-15 minutes to set up a project with unit tests running?</p>

<p>The former one was definitely a problem to me and the latter was also a recurring problem at coding dojos. When you only have so much time for a kata, these minutes count.</p>

<p><a href="https://github.com/sandordargo/cmake-project-creator">Cmake Project Creator</a> is one of the possible solutions. It helps you generate a new C++ project. Instead of writing all the CMakeLists and create all the folders by hand, you can simplify this to run the tool with a shipped set-up or you can write a description by yourself.</p>

<h2 id="what-does-it-generate">What does it generate?</h2>

<p><a href="https://github.com/sandordargo/cmake-project-creator">Cmake Project Creator</a> creates a directory structure for you with all the required <code class="language-plaintext highlighter-rouge">CMakeLists.txt</code> files, and if specified, all the plumbing to include dependencies from <a href="https://conan.io/"><code class="language-plaintext highlighter-rouge">Conan</code></a> - such as GTest. Besides, you’ll get a skeleton of a class in all components, and in case tests were required, a failing unit test will be generated along with an easy way to invoke it.</p>

<p>First, why a failing unit test? When I create a new component, I always write a failing assertion such as <code class="language-plaintext highlighter-rouge">ASSERT_EQ(1, 2)</code> to verify that I see the expected failure. Then I fix it so that I can see it’s working.</p>

<p>What you get after generating your project is the failing test.</p>

<p>And what’s the easy way to invoke it?</p>

<p><a href="https://github.com/sandordargo/cmake-project-creator">Cmake Project Generator</a> also creates a small script called <code class="language-plaintext highlighter-rouge">runTests.sh</code>, which cleans up the results of the previous build, fetches the external dependencies, compiles the project, and runs all the generated unit tests.</p>

<h2 id="how-to-use-it">How to use it?</h2>

<p>I won’t go into details on how to write a descriptor file, you can check the <a href="https://github.com/sandordargo/cmake-project-creator">README for that</a>, but briefly, it’s a <code class="language-plaintext highlighter-rouge">JSON</code> file that can be quite simple for a simple project and it might get a bit more complex, but I think it’s still easier than writing all the needed files by hand.</p>

<p>To give you an example, if you want to generate a project with a single component and with unit test, in other words, if you want the below structure, you can invoke the tool with the parameter <code class="language-plaintext highlighter-rouge">-s single</code>.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><!-- <td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre></td> --><td class="rouge-code"><pre>myProject
|_ include
|_ src
|_ test

</pre></td></tr></tbody></table></code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">-s single</code> instructs the tool to create a project with one include, one source, and one test folder. GTest will be included for unit testing through Conan.</p>

<p>But how that <code class="language-plaintext highlighter-rouge">single</code> descriptor looks like. It looks like this:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><!-- <td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
</pre></td> --><td class="rouge-code"><pre><span class="p">{</span><span class="w">
</span><span class="err"> </span><span class="w"> </span><span class="nl">"projectName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MyTestProjectSingle"</span><span class="p">,</span><span class="w">
</span><span class="err"> </span><span class="w"> </span><span class="nl">"directories"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
</span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"src"</span><span class="p">,</span><span class="w">
</span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"source"</span><span class="p">,</span><span class="w">
</span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="nl">"library"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
</span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="nl">"executable"</span><span class="p">:</span><span class="w"> </span><span class="s2">"true"</span><span class="p">,</span><span class="w">
</span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="nl">"include"</span><span class="p">:</span><span class="w"> </span><span class="s2">"true"</span><span class="p">,</span><span class="w">
</span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="nl">"dependencies"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
</span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="nl">"subdirectories"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="p">},</span><span class="w">
</span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"include"</span><span class="p">,</span><span class="w">
</span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"include"</span><span class="p">,</span><span class="w">
</span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="nl">"subdirectories"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="p">},</span><span class="w">
</span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="p">{</span><span class="w">
</span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tests"</span><span class="p">,</span><span class="w">
</span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"tests"</span><span class="p">,</span><span class="w">
</span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="nl">"dependencies"</span><span class="p">:</span><span class="w"> </span><span class="p">[{</span><span class="w">
</span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"conan"</span><span class="p">,</span><span class="w">
</span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gtest"</span><span class="p">,</span><span class="w">
</span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.8.1"</span><span class="w">
</span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="p">}],</span><span class="w">
</span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="nl">"subdirectories"</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span><span class="w">
</span><span class="err"> </span><span class="w"> </span><span class="err"> </span><span class="w"> </span><span class="p">}</span><span class="w">
</span><span class="err"> </span><span class="w"> </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></div></div>

<p>If you want a deeper explanation of what each field means, check out the documentation, especially that it might change and docs will be updated, not this article. This example is here only to represent the simplicity of writing such a description - compared to write all the CMakefiles and Conan configurations by hand.</p>

<h2 id="how-can-you-contribute">How can you contribute?</h2>

<p>You can find the project on <a href="https://github.com/sandordargo/cmake-project-creator">Github</a> and feel free to check the <a href="https://github.com/sandordargo/cmake-project-creator/issues">issues tab</a>. In fact, before you start working on something, I’d urge you to check the issues tab to make sure that the problem/new feature is already covered with a ticket and nobody took it yet.</p>

<p>That’s a way to discuss whether the requested change is in scope and to avoid that you work in vain as someone already started the implementation of the same fix or enhancement.</p>

<p>We use Python 3.8 as a programming language and obviously, you need some familiarity with C++, but mostly with <a href="https://cmake.org/">CMake</a>. For unit testing, Nosetests is used.</p>

<p>On the non-functional side, some tests are missing and some refactoring is clearly needed. At the moment of writing, the code coverage is 70%.</p>

<p>On the function side, I think even more things are missing. Supporting different package managers (now only Conan can be used), different compilers (GCC is used), different versions of C++ (C++ 17 is used), etc.</p>

<p>Check out the issues tab, if that sounds like fun to you.</p>

<h2 id="conclusion">Conclusion?</h2>

<p>If you’re using an IDE that takes care of the generation of a project, of CMakeLists files, good for you, probably you won’t need this tool. But if you don’t want to use those IDEs, many of them are paying, feel free to try and leave a comment and a star if you liked it.</p>

<p><a href="https://github.com/sandordargo/cmake-project-creator">Cmake Project Creator</a> will help you quickly generate new C++ projects based on CMake and Conan dependencies and you can start coding in a matter of seconds if your desired structure is already covered with the built-in options, otherwise in a couple of minutes.</p>

<p>That’s clearly a win compared to setting up a new project by hand.</p>
:ET